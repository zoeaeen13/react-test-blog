(this["webpackJsonpreact-blog"]=this["webpackJsonpreact-blog"]||[]).push([[0],{35:function(n,t,e){"use strict";e.r(t);var r=e(0),c=e(1),o=e(20),i=e.n(o),a=e(4),u=e(7),s=e(5),l=e(2),j=e(3),d="token",b=function(n){localStorage.setItem(d,n)},f=function(){return localStorage.getItem(d)};function x(n){var t=new Date(n);return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()}var p="@media (max-width: 576px)",h="@media (max-width: 768px)";function O(){var n=Object(l.a)(["\n  display: flex;\n  justify-content: flex-start;\n  padding-bottom: 10vh;\n\n  "," {\n    flex-direction: column;\n    align-items: center;\n  }\n"]);return O=function(){return n},n}function v(){var n=Object(l.a)(["\n  margin: 0 auto;\n  width: 50%;\n\n  "," {\n    width: 80%;\n  }\n"]);return v=function(){return n},n}function g(){var n=Object(l.a)([""]);return g=function(){return n},n}function m(){var n=Object(l.a)(['\n  margin: 20px 0;\n  padding: 10px 0;\n  color: #818181;\n  font-size: 28px;\n  text-decoration: underline;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n']);return m=function(){return n},n}function w(){var n=Object(l.a)(['\n  margin: 10px 0;\n  border-radius: 4px;\n  padding: 2px 5px;\n  color: #212121;\n  font-size: 20px;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n']);return w=function(){return n},n}function y(){var n=Object(l.a)(["\n  padding-top: 15vh;\n"]);return y=function(){return n},n}function k(){var n=Object(l.a)(['\n  color: #212121;\n  font-size: 22px;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n  letter-spacing: 0.05em;\n  line-height: 1.5;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n']);return k=function(){return n},n}function S(){var n=Object(l.a)(["\n  font-size: 16px;\n  color: #212121;\n  letter-spacing: 0.1em;\n"]);return S=function(){return n},n}function z(){var n=Object(l.a)(["\n  border: 1px solid #d1d1d1;\n  background: #fcfcfc;\n  border-radius: 10px;\n  padding: 20px;\n  width: 25%;\n  transition: all 0.3s ease-in;\n\n  &:hover {\n    transform: scale(1.04);\n  }\n\n  & + & {\n    margin-left: 20px;\n  }\n\n  "," {\n    width: 80%;\n    margin-bottom: 20px;\n\n    & + & {\n      margin-left: 0px;\n    }\n  }\n"]);return z=function(){return n},n}function C(){var n=Object(l.a)(['\n  color: #1a8917;\n  font-size: 14px;\n  font-family: "Montserrat", sans-serif;\n  text-decoration: none;\n']);return C=function(){return n},n}function A(){var n=Object(l.a)(['\n  margin: 5px 0;\n  color: #d1d1d1;\n  font-size: 16px;\n  font-family: "Montserrat", sans-serif;\n']);return A=function(){return n},n}function P(){var n=Object(l.a)(['\n  color: #212121;\n  font-size: 22px;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n  letter-spacing: 0.05em;\n  line-height: 1.5;\n  text-overflow: ellipsis;\n  word-wrap: break-word;\n']);return P=function(){return n},n}function E(){var n=Object(l.a)(['\n  margin: 10px 0;\n  border: 1px solid #212121;\n  border-radius: 4px;\n  padding: 2px 5px;\n  color: #212121;\n  font-size: 14px;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n  text-decoration: none;\n']);return E=function(){return n},n}function M(){var n=Object(l.a)(['\n  margin: 10px 0;\n  color: #212121;\n  font-size: 32px;\n  font-weight: bold;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n  letter-spacing: 0.1em;\n']);return M=function(){return n},n}function N(){var n=Object(l.a)(['\n  color: #212121;\n  font-size: 22px;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n  letter-spacing: 0.05em;\n  line-height: 1.5;\n  text-overflow: ellipsis;\n  word-wrap: break-word;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n']);return N=function(){return n},n}function B(){var n=Object(l.a)(['\n  margin: 5px 0;\n  color: #212121;\n  font-size: 20px;\n  font-weight: bold;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n  letter-spacing: 0.1em;\n  text-decoration: none;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n']);return B=function(){return n},n}function J(){var n=Object(l.a)(['\n  margin: 5px 0;\n  color: #212121;\n  font-size: 32px;\n  font-weight: bold;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n  letter-spacing: 0.1em;\n  text-decoration: none;\n']);return J=function(){return n},n}function T(){var n=Object(l.a)(["\n  border-bottom: 1px solid #eeeeee;\n  margin-bottom: 20px;\n  padding: 25px 0;\n"]);return T=function(){return n},n}var _=j.a.div(T()),Y=Object(j.a)(u.b)(J()),I=Object(j.a)(u.b)(B()),L=j.a.p(N()),U=j.a.h2(M()),D=Object(j.a)(u.b)(E()),$=j.a.p(P()),F=j.a.h5(A()),H=Object(j.a)(u.b)(C()),X=j.a.div(z(),p),R=j.a.span(S()),W=j.a.p(k()),q=j.a.div(y()),G=j.a.h4(w()),K=j.a.h3(m()),Q=j.a.div(g()),V=j.a.div(v(),h),Z=j.a.div(O(),p);function nn(n){var t=n.post,e=x(t.createdAt);return Object(r.jsxs)(_,{children:[Object(r.jsx)(F,{children:e}),Object(r.jsx)(Y,{to:"/posts/".concat(t.id),children:t.title}),Object(r.jsx)(L,{children:t.body}),Object(r.jsx)(H,{to:"/posts/".concat(t.id),children:"Read more"})]})}function tn(n){var t=n.post,e=x(t.createdAt);return Object(r.jsxs)(_,{children:[Object(r.jsx)(F,{children:e}),Object(r.jsx)(U,{children:t.title}),t.user.nickname&&Object(r.jsx)(D,{to:"/user/".concat(t.userId),children:t.user.nickname}),Object(r.jsx)($,{children:t.body})]})}function en(n){var t=n.order,e=n.post,c=x(e.createdAt);return Object(r.jsxs)(X,{children:[Object(r.jsxs)(R,{children:["#",t]}),Object(r.jsx)(I,{to:"/posts/".concat(e.id),children:e.title}),Object(r.jsx)(F,{children:c})]})}function rn(n){var t=n.post,e=x(t.createdAt);return Object(r.jsxs)(_,{children:[Object(r.jsx)(Y,{to:"/posts/".concat(t.id),children:t.title}),Object(r.jsx)(F,{children:e}),Object(r.jsx)(W,{children:t.body})]})}var cn=Object(c.createContext)(null);function on(){var n=Object(l.a)(["\n  box-sizing: border-box;\n  background: white;\n  border: 1px solid #212121;\n  color: #212121;\n\n  &:hover {\n    background: #eeeeee;\n    border-color: white;\n  }\n"]);return on=function(){return n},n}function an(){var n=Object(l.a)(["\n  background: #212121;\n  color: white;\n  padding: 8px 15px;\n  border-radius: 4px;\n  transition: all 0.2s ease-in;\n  cursor: pointer;\n\n  &:hover {\n    background: #414141;\n  }\n"]);return an=function(){return n},n}function un(){var n=Object(l.a)(["\n  margin: 0 10px;\n  border-radius: 4px;\n  padding: 8px 15px;\n  background: #212121;\n  color: white;\n  transition: all 0.3s ease-in;\n  text-decoration: none;\n\n  &:hover {\n    background: #414141;\n  }\n"]);return un=function(){return n},n}function sn(){var n=Object(l.a)(["\n  color: #d1d1d1;\n  text-decoration: none;\n  padding: 10px;\n\n  &:hover {\n    color: #222222;\n    filter: brightness(1.05);\n  }\n\n  ",";\n"]);return sn=function(){return n},n}function ln(){var n=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n"]);return ln=function(){return n},n}function jn(){var n=Object(l.a)(['\n  margin: 0 30px;\n  color: #222222;\n  font-size: 28px;\n  font-weight: bold;\n  font-family: "Archivo Black", sans-serif;\n']);return jn=function(){return n},n}function dn(){var n=Object(l.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid #eeeeee;\n  padding: 10px;\n  background: white;\n\n  "," {\n    flex-direction: column;\n    align-items: center;\n  }\n"]);return dn=function(){return n},n}var bn=j.a.div(dn(),p),fn=j.a.div(jn()),xn=j.a.div(ln()),pn=Object(j.a)(u.b)(sn(),(function(n){return n.$active&&"color: #222222;"})),hn=Object(j.a)(u.b)(un()),On=j.a.button(an()),vn=Object(j.a)(hn)(on());function gn(){var n=Object(s.g)(),t=Object(s.f)(),e="/post"===n.pathname,o=Object(c.useContext)(cn),i=o.user,a=o.setUser;return Object(r.jsxs)(bn,{children:[Object(r.jsxs)(xn,{children:[Object(r.jsx)(fn,{children:"LIDEMY"}),Object(r.jsx)(pn,{to:"/",$active:"/"===n.pathname,children:"Home"}),Object(r.jsx)(pn,{to:"/archive",$active:"/archive"===n.pathname,children:"Archive"}),Object(r.jsx)(pn,{to:"/about",$active:"/about"===n.pathname,children:"About"})]}),Object(r.jsxs)("div",{children:[!i&&Object(r.jsx)(hn,{to:"/register",children:"Sign up"}),!i&&Object(r.jsx)(hn,{to:"/login",children:"Log in"}),i&&!e&&Object(r.jsx)(On,{onClick:function(){b(null),a(null),"/"!==n.pathname&&t.push("/")},children:"Sign out"}),i&&!e&&Object(r.jsx)(vn,{to:"/post",children:"New Post"})]})]})}var mn="https://student-json-api.lidemy.me",wn=function(n){return fetch("".concat(mn,"/posts?_limit=5&_page=").concat(n,"&_sort=createdAt&_order=desc")).then((function(n){return n}))},yn=function(n){return fetch("".concat(mn,"/users/").concat(n,"?_embed=posts")).then((function(n){return n.json()}))},kn=function(){var n=f();return fetch("".concat(mn,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function Sn(){var n=Object(l.a)(["\n  width: 150px;\n  margin: 0 auto;\n\n  img {\n    width: 50%;\n    object-fit: cover;\n  }\n"]);return Sn=function(){return n},n}function zn(){var n=Object(l.a)(["\n  width: 150px;\n  color: #525252;\n  font-size: 14px;\n  overflow-wrap: break-word;\n\n  a {\n    color: #525252;\n    text-decoration: underline;\n  }\n"]);return zn=function(){return n},n}function Cn(){var n=Object(l.a)(['\n  color: #222222;\n  font-size: 18px;\n  font-weight: bold;\n  font-family: "Archivo Black", sans-serif;\n']);return Cn=function(){return n},n}function An(){var n=Object(l.a)(['\n  margin: 10px 0;\n  font-family: "Montserrat", sans-serif;\n  color: #d1d1d1;\n']);return An=function(){return n},n}function Pn(){var n=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  position: fixed;\n  top: 50%;\n  margin: 0 8%;\n\n  "," {\n    display: none;\n  }\n"]);return Pn=function(){return n},n}var En=j.a.div(Pn(),h),Mn=j.a.h5(An()),Nn=j.a.div(Cn()),Bn=j.a.p(zn()),Jn=j.a.div(Sn());function Tn(){return Object(r.jsxs)(En,{children:[Object(r.jsx)(Jn,{children:Object(r.jsx)("img",{src:"images/avatar.png",alt:""})}),Object(r.jsx)(Mn,{children:"ABOUT"}),Object(r.jsx)(Nn,{children:"Lidemy"}),Object(r.jsxs)(Bn,{children:["\u4e00\u500b\u70ba\u521d\u5b78\u8005\u800c\u751f\u7684\u7dda\u4e0a\u7a0b\u5f0f\u8ab2\u7a0b\u5e73\u53f0",Object(r.jsx)("a",{href:"https://lidemy.com/",children:"https://lidemy.com/"})]})]})}var _n=function(){var n=Object(c.useState)([]),t=Object(a.a)(n,2),e=t[0],o=t[1];return Object(c.useEffect)((function(){fetch("".concat(mn,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()})).then((function(n){return o(n)}))}),[]),Object(r.jsxs)(Q,{children:[Object(r.jsx)(Tn,{}),Object(r.jsx)(V,{children:e&&e.map((function(n){return Object(r.jsx)(nn,{post:n},n.id)}))})]})};function Yn(){var n=Object(l.a)(["\n  width: 150px;\n  margin: 30px;\n\n  img {\n    width: 100%;\n    object-fit: cover;\n  }\n"]);return Yn=function(){return n},n}function In(){var n=Object(l.a)(["\n  color: #525252;\n  font-size: 16px;\n  overflow-wrap: break-word;\n\n  a {\n    color: #525252;\n    text-decoration: underline;\n  }\n  span {\n    color: #ca4141;\n  }\n"]);return In=function(){return n},n}function Ln(){var n=Object(l.a)(['\n  color: #222222;\n  font-size: 30px;\n  font-weight: bold;\n  font-family: "Archivo Black", sans-serif;\n']);return Ln=function(){return n},n}function Un(){var n=Object(l.a)(['\n  margin: 10px 0;\n  font-family: "Montserrat", sans-serif;\n  color: #d1d1d1;\n']);return Un=function(){return n},n}function Dn(){var n=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 10vh auto;\n  padding: 20px;\n  width: 60%;\n"]);return Dn=function(){return n},n}var $n=j.a.div(Dn()),Fn=j.a.h5(Un()),Hn=j.a.div(Ln()),Xn=j.a.p(In()),Rn=j.a.div(Yn());var Wn=function(){return Object(r.jsxs)($n,{children:[Object(r.jsx)(Rn,{children:Object(r.jsx)("img",{src:"images/avatar.png",alt:""})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(Fn,{children:"ABOUT"}),Object(r.jsx)(Hn,{children:"\u7b2c\u56db\u671f\u7a0b\u5f0f\u5c0e\u5e2b\u8a08\u756b"}),Object(r.jsxs)(Xn,{children:["\u4e0d\u558a\u53e3\u865f\u4e5f\u4e0d\u8a87\u5927\u6210\u6548\uff0c\u958b\u653e\u900f\u660e\u7684 ",Object(r.jsx)("span",{children:"\u7db2\u9801\u524d\u5f8c\u7aef\u7dda\u4e0a\u5b78\u7fd2\u8a08\u756b"}),Object(r.jsx)("br",{}),"\u8a66\u8457\u7528\u516d\u500b\u6708\u7684\u6642\u9593\uff0c\u57f9\u990a\u51fa\u4e00\u500b\u627e\u5f97\u5230\u5de5\u4f5c\u4e14\u57fa\u790e\u7d2e\u5be6\u7684\u7db2\u9801\u5de5\u7a0b\u5e2b",Object(r.jsx)("br",{}),Object(r.jsx)("a",{href:"https://bootcamp.lidemy.com/index.html",children:"https://bootcamp.lidemy.com"})]})]})]})};function qn(){var n=Object(l.a)(['\n  color: #1a8917;\n  font-size: 14px;\n  font-family: "Montserrat", sans-serif;\n  text-decoration: none;\n']);return qn=function(){return n},n}function Gn(){var n=Object(l.a)(["\n  border: none;\n  background: #212121;\n  text-decoration: none;\n  margin: 20px 0;\n  padding: 8px 15px;\n  border-radius: 4px;\n  transition: all 0.3s ease-in-out;\n  cursor: pointer;\n  color: white;\n\n  &:hover {\n    transform: scale(1.05);\n  }\n"]);return Gn=function(){return n},n}function Kn(){var n=Object(l.a)(["\n  font-size: 16px;\n  color: #ca3e47;\n"]);return Kn=function(){return n},n}function Qn(){var n=Object(l.a)(["\n  margin-bottom: 20px;\n  border: none;\n  border-bottom: 1px solid ",";\n  padding: 10px;\n  width: 20%;\n\n  &:focus {\n    outline: none;\n  }\n"]);return Qn=function(){return n},n}function Vn(){var n=Object(l.a)(["\n  margin: 10px 0;\n  font-size: 14px;\n  font-weight: 300;\n  color: ",";\n"]);return Vn=function(){return n},n}function Zn(){var n=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Zn=function(){return n},n}function nt(){var n=Object(l.a)(["\n  font-size: 20px;\n  color: #222222;\n"]);return nt=function(){return n},n}function tt(){var n=Object(l.a)(["\n  font-size: 32px;\n  font-weight: bold;\n  color: #222222;\n"]);return tt=function(){return n},n}function et(){var n=Object(l.a)(["\n  text-align: center;\n"]);return et=function(){return n},n}var rt=j.a.div(et()),ct=j.a.h2(tt()),ot=j.a.p(nt()),it=j.a.div(Zn()),at=j.a.h6(Vn(),(function(n){return n.verify?"#ca3e47":"#222222"})),ut=j.a.input(Qn(),(function(n){return n.verify?"#ca3e47":"#222222"})),st=j.a.h5(Kn()),lt=j.a.button(Gn()),jt=Object(j.a)(u.b)(qn());var dt=function(){var n=Object(c.useContext)(cn).setUser,t=Object(c.useState)("zoeaeen13"),e=Object(a.a)(t,2),o=e[0],i=e[1],u=Object(c.useState)("Lidemy"),l=Object(a.a)(u,2),j=l[0],d=l[1],f=Object(c.useState)(!1),x=Object(a.a)(f,2),p=x[0],h=x[1],O=Object(c.useState)(null),v=Object(a.a)(O,2),g=v[0],m=v[1],w=Object(s.f)(),y=function(n){m(null),"account"===n.target.name&&i(n.target.value),"password"===n.target.name&&d(n.target.value)};return Object(r.jsxs)(rt,{children:[Object(r.jsx)(ct,{children:"Sign in with Account"}),Object(r.jsx)(ot,{children:"Enter the account and password."}),g&&Object(r.jsx)(st,{children:g}),Object(r.jsxs)(it,{children:[Object(r.jsx)(at,{verify:p&&!o,children:"Your account"}),Object(r.jsx)(ut,{name:"account",type:"text",value:o,onChange:y,verify:p&&!o}),Object(r.jsx)(at,{verify:p&&!j,children:"Your password"}),Object(r.jsx)(ut,{name:"password",type:"password",value:j,onChange:y,verify:p&&!j}),Object(r.jsx)(lt,{onClick:function(){if(h(!0),m(null),!o||!j)return m("Please fill in the blank input box.");(function(n,t){return fetch("".concat(mn,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))})(o,j).then((function(t){if(!t.ok)return m(t.message);b(t.token),kn().then((function(t){if(!t.ok)return m(t.message);n(t.data),w.push("/")}))}))},children:"Continue"}),Object(r.jsx)(jt,{to:"/",children:"back to Home"})]})]})};var bt=function(){var n=Object(c.useContext)(cn).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),o=e[0],i=e[1],u=Object(c.useState)(""),l=Object(a.a)(u,2),j=l[0],d=l[1],f="Lidemy",x=Object(c.useState)(!1),p=Object(a.a)(x,2),h=p[0],O=p[1],v=Object(c.useState)(null),g=Object(a.a)(v,2),m=g[0],w=g[1],y=Object(s.f)(),k=function(n){w(null),"username"===n.target.name&&i(n.target.value),"nickname"===n.target.name&&d(n.target.value)};return Object(r.jsxs)(rt,{children:[Object(r.jsx)(ct,{children:"Create a new account"}),Object(r.jsx)(ot,{children:"Enter the your nickname and username."}),Object(r.jsx)(ot,{children:"For testing, the password is set as default value 'Lidemy'."}),m&&Object(r.jsx)(st,{children:m}),Object(r.jsxs)(it,{children:[Object(r.jsx)(at,{verify:h&&!j,children:"Your nickname"}),Object(r.jsx)(ut,{name:"nickname",type:"text",value:j,onChange:k,verify:h&&!j}),Object(r.jsx)(at,{verify:h&&!o,children:"Your username"}),Object(r.jsx)(ut,{name:"username",type:"text",value:o,onChange:k,verify:h&&!o}),Object(r.jsx)(at,{children:"Your password"}),Object(r.jsx)(ut,{name:"password",type:"password",value:f,readonly:!0}),Object(r.jsx)(lt,{onClick:function(){if(O(!0),w(null),!o||!j)return w("Please fill in the blank input box.");(function(n,t,e){return fetch("".concat(mn,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))})(j,o,f).then((function(t){if(!t.ok)return w(t.message);b(t.token),kn().then((function(t){if(!t.ok)return w(t.message);n(t.data),y.push("/")}))}))},children:"Continue"})]})]})};function ft(){var n=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  right: 50px;\n  margin: 20px 10px;\n  border: none;\n  border-radius: 4px;\n  padding: 8px 14px;\n  font-size: 13px;\n  font-weight: bold;\n  background: #03a87c;\n  color: white;\n  cursor: pointer;\n  text-decoration: none;\n\n  &:focus {\n    outline: none;\n  }\n\n  &:hover {\n    filter: brightness(1.1);\n  }\n"]);return ft=function(){return n},n}function xt(){var n=Object(l.a)(["\n  font-size: 16px;\n  color: #ca3e47;\n"]);return xt=function(){return n},n}function pt(){var n=Object(l.a)(["\n  margin: 20px auto;\n  color: #292929;\n  width: 80%;\n  border: 1px solid #d1d1d1;\n  border-radius: 5px;\n  font-size: 18px;\n  letter-spacing: 1px;\n  padding: 20px;\n\n  &:focus {\n    outline: none;\n  }\n"]);return pt=function(){return n},n}function ht(){var n=Object(l.a)(["\n  font-weight: bold;\n  font-size: 30px;\n  letter-spacing: 1px;\n  margin: 20px auto;\n  box-sizing: border-box;\n  border: none;\n  padding: 5px;\n  color: #292929;\n  width: 80%;\n\n  &:focus {\n    outline: none;\n  }\n"]);return ht=function(){return n},n}function Ot(){var n=Object(l.a)(["\n  text-align: center;\n  margin: 6vh auto;\n  border: none;\n  overflow: hidden;\n  border-radius: 2px;\n  box-sizing: border-box;\n  width: 60%;\n\n  "," {\n    width: 90%;\n  }\n"]);return Ot=function(){return n},n}function vt(){var n=Object(l.a)(["\n  position: relative;\n"]);return vt=function(){return n},n}var gt=j.a.form(vt()),mt=j.a.div(Ot(),h),wt=j.a.input(ht()),yt=j.a.textarea(pt()),kt=j.a.h5(xt()),St=j.a.button(ft());var zt=function(){var n=Object(s.f)(),t=Object(c.useState)(""),e=Object(a.a)(t,2),o=e[0],i=e[1],u=Object(c.useState)(""),l=Object(a.a)(u,2),j=l[0],d=l[1],b=Object(c.useState)(null),x=Object(a.a)(b,2),p=x[0],h=x[1],O=function(n){h(null),"title"===n.target.name&&i(n.target.value),"content"===n.target.name&&d(n.target.value)};return Object(r.jsxs)(gt,{onSubmit:function(t){if(t.preventDefault(),!o||!j)return h("Please fill in the blank for your article.");(function(n,t){var e=f();return fetch("".concat(mn,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))})(o,j).then((function(t){if(!t.id)return h(t.message);n.push("/")}))},children:[Object(r.jsxs)(mt,{children:[Object(r.jsx)(wt,{name:"title",placeholder:"Title",value:o,onChange:O}),Object(r.jsx)(yt,{name:"content",placeholder:"Write a story...",rows:"10",cols:"50",value:j,onChange:O}),p&&Object(r.jsx)(kt,{children:p})]}),Object(r.jsx)(St,{children:"Publish"})]})};var Ct=function(){var n=Object(s.h)().slug,t=Object(c.useState)(null),e=Object(a.a)(t,2),o=e[0],i=e[1],u=Object(c.useState)(0),l=Object(a.a)(u,2),j=l[0],d=l[1],b=Object(c.useState)(null),f=Object(a.a)(b,2),x=f[0],p=f[1];return console.log("rela",x),Object(c.useEffect)((function(){var t;(t=n,fetch("".concat(mn,"/posts?id=").concat(t,"&_expand=user")).then((function(n){return n.json()}))).then((function(n){i(n[0]),d(n[0].userId)}))}),[n]),Object(c.useEffect)((function(){yn(j).then((function(t){if(t.id){var e=t.posts.filter((function(t){return t.id!==Number(n)}));e.length>0&&p(e.filter((function(n,t){return t<3})))}}))}),[n,j]),Object(r.jsxs)(Q,{children:[Object(r.jsx)(Tn,{}),Object(r.jsxs)(V,{children:[o&&Object(r.jsx)(tn,{post:o}),Object(r.jsx)(G,{children:"\u540c\u7cfb\u5217\u6587\u7ae0\u9084\u6709..."}),Object(r.jsxs)(Z,{children:[x&&x.map((function(n,t){return Object(r.jsx)(en,{order:t+1,post:n},n.id)})),!x&&Object(r.jsx)("div",{children:"no related posts"})]})]})]})};function At(){var n=Object(l.a)(["\n  width: 40px;\n  border: none;\n  background: transparent;\n  transition: 0.2s all ease-in;\n  cursor: pointer;\n  margin: 0 10px;\n\n  img {\n    width: 100%;\n    object-fit: cover;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &:hover {\n    transform: scale(1.3);\n  }\n"]);return At=function(){return n},n}function Pt(){var n=Object(l.a)(['\n  color: #212121;\n  font-size: 18px;\n  font-weight: bold;\n  font-family: "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n  letter-spacing: 0.1em;\n  color: #818181;\n']);return Pt=function(){return n},n}function Et(){var n=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n  width: 80%;\n  backgroudn: red;\n"]);return Et=function(){return n},n}var Mt=j.a.div(Et()),Nt=j.a.h5(Pt()),Bt=j.a.button(At());function Jt(n){var t=n.current,e=n.total,c=n.handleChangePage;return Object(r.jsxs)(Mt,{children:[1!==t&&Object(r.jsx)(Bt,{onClick:function(){c(t-1)},children:Object(r.jsx)("img",{alt:"",src:"./images/left-arrow.png"})}),Object(r.jsxs)(Nt,{children:["\u76ee\u524d\u7b2c ",t," \u9801"]}),t!==e&&Object(r.jsx)(Bt,{onClick:function(){c(t+1)},children:Object(r.jsx)("img",{alt:"",src:"./images/right-arrow.png"})})]})}var Tt=function(){var n=Object(s.h)().slug,t=Object(c.useState)([]),e=Object(a.a)(t,2),o=e[0],i=e[1],u=Object(c.useState)(null),l=Object(a.a)(u,2),j=l[0],d=l[1],b=Object(c.useState)([]),f=Object(a.a)(b,2),x=f[0],p=f[1],h=Object(c.useState)(1),O=Object(a.a)(h,2),v=O[0],g=O[1],m=Object(c.useState)(0),w=Object(a.a)(m,2),y=w[0],k=w[1];return Object(c.useEffect)((function(){n?yn(n).then((function(n){n.posts.length>0&&i(n.posts.reverse()),d({nickname:n.nickname,postNum:n.posts.length})})):wn(1).then((function(n){if(n.headers.get("X-Total-Count")){var t=Number(n.headers.get("X-Total-Count")),e=Math.ceil(t/5);return!t%5&&(e+=1),console.log("totalPage",e),k(e),n.json()}})).then((function(n){console.log("posts",n),p(n)}))}),[n]),Object(c.useEffect)((function(){return wn(v).then((function(n){return n.json()})).then((function(n){p(n)}))}),[v]),Object(r.jsxs)(Q,{children:[Object(r.jsx)(Tn,{}),Object(r.jsxs)(V,{children:[!n&&Object(r.jsx)(K,{children:"\u6240\u6709\u6587\u7ae0"}),n&&j&&Object(r.jsxs)(K,{children:["'",j.nickname,"' \u76ee\u524d\u767c\u8868\u4e86 ",j.postNum," \u7bc7\u6587\u7ae0"]}),x&&x.map((function(n){return Object(r.jsx)(rn,{post:n},n.id)})),n&&o.map((function(n){return Object(r.jsx)(rn,{post:n},n.id)})),!n&&x&&y&&Object(r.jsx)(Jt,{current:v,total:y,handleChangePage:function(n){g(n)}})]})]})};var _t=function(){var n=Object(c.useState)(null),t=Object(a.a)(n,2),e=t[0],o=t[1];return Object(c.useEffect)((function(){f()&&kn().then((function(n){if(!n.ok)return b(null);o(n.data)}))}),[]),Object(r.jsx)(cn.Provider,{value:{user:e,setUser:o},children:Object(r.jsx)(q,{children:Object(r.jsxs)(u.a,{children:[Object(r.jsx)(gn,{}),Object(r.jsxs)(s.c,{children:[Object(r.jsx)(s.a,{exact:!0,path:"/",children:Object(r.jsx)(_n,{})}),Object(r.jsx)(s.a,{path:"/about",children:Object(r.jsx)(Wn,{})}),Object(r.jsx)(s.a,{path:"/login",children:Object(r.jsx)(dt,{})}),Object(r.jsx)(s.a,{path:"/register",children:Object(r.jsx)(bt,{})}),Object(r.jsx)(s.a,{path:"/post",children:Object(r.jsx)(zt,{})}),Object(r.jsx)(s.a,{path:"/archive",children:Object(r.jsx)(Tt,{})}),Object(r.jsx)(s.a,{path:"/posts/:slug",children:Object(r.jsx)(Ct,{})}),Object(r.jsx)(s.a,{path:"/user/:slug",children:Object(r.jsx)(Tt,{})})]})]})})})};i.a.render(Object(r.jsx)(_t,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.bb93d04f.chunk.js.map